(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-552fb3dc"],{"0fa6":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"mainHeight",attrs:{id:"match"}},[r("div",{staticClass:"dealer_box user_box"},[e._l(e.dealer_arr,(function(t,a){return r("div",{key:a,staticClass:"card_box",class:{no_see:e.no_see_bool&&a==e.dealer_arr.length-1}},[e.no_see_bool&&a==e.dealer_arr.length-1?r("p"):r("p",[e._v(e._s(t))])])})),r("div",{staticClass:"current_score"},[r("div",[e._v(" 当前分数: ")]),r("div",{staticClass:"score_num"},[e._v(e._s(e.dealer_score))])])],2),e.operate_show?r("div",{staticClass:"operate_btn"},[r("div",[r("el-button",{staticClass:"click_btn",attrs:{type:"primary",plain:""},on:{click:e.hit}},[e._v("HIT")])],1),r("div",[r("el-button",{staticClass:"click_btn",attrs:{type:"success",plain:""},on:{click:e.stand}},[e._v("STAND")])],1)]):e._e(),r("div",[r("el-button",{staticClass:"click_btn",attrs:{type:"primary",plain:""},on:{click:e.hit}},[e._v("HIT2")])],1),r("div",[r("el-button",{staticClass:"click_btn",attrs:{type:"success",plain:""},on:{click:e.stand}},[e._v("STAND2")])],1),r("div",{staticClass:"player_box user_box"},[r("div",{staticClass:"money_area"},[r("div",{staticClass:"money"},[e._v(" money:"+e._s(e.balance)+" "),r("el-button",{attrs:{type:"primary",plain:""},on:{click:e.add_money}},[e._v("add")])],1),r("div",{staticClass:"money"},[e._v(" bet:"+e._s(e.bet_num)+" "),r("el-button",{attrs:{type:"primary",plain:""},on:{click:e.open}},[e._v("bet")])],1)]),r("div",{staticClass:"card_area"},[e._l(e.player_arr,(function(t,a){return r("div",{key:a,staticClass:"card_box"},[r("p",[e._v(e._s(t))])])})),r("div",{staticClass:"current_score"},[r("div",[e._v(" 当前分数: ")]),r("div",{staticClass:"score_num"},[e._v(e._s(e.player_score))])])],2)]),r("div",{staticClass:"bust_box",class:{dealer_win:e.dealer_win_bool,player_win:e.player_win_bool}},[e._v(" Bust! ")])])},n=[],o=r("1da1"),c=(r("96cf"),r("a026")),s=r("99e5"),l=r.n(s),i={name:"match",data:function(){return{operate_show:!1,no_see_bool:!0,dealer_arr:[5,10],player_arr:[10,10],dealer_win_bool:!1,player_win_bool:!1,balance:0,bet_num:0,stand_num:0,dealer_score:0,player_score:0,add_balance:0,add_bet:0,game_result:0}},methods:{get_game:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.contract.methods.get_game().call({from:e.account}).catch((function(e){console.error("error get_game "+e)}));case 2:r=t.sent,e.stand_num=e.stand_num+1,a=r.bet,console.log("this game",e.account,r,a),n=r.dealer_hidden_card,o=r.dealer_card,e.dealer_arr=[parseInt(o),parseInt(n)],console.log("dealer_arr get game",e.dealer_arr,parseInt(o),parseInt(n)),c=r.player_card,e.player_arr=c,console.log("player_arr get game",e.player_arr,parseInt(c)),e.game_result=r.is_finish;case 14:case"end":return t.stop()}}),t)})))()},get_result:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.contract.methods.get_result().call({from:e.account});case 2:r=t.sent,1==r?(e.player_win_bool=!0,e.dealer_win_bool=!1):2==r?(e.player_win_bool=!1,e.dealer_win_bool=!0):(e.player_win_bool=!1,e.dealer_win_bool=!1);case 4:case"end":return t.stop()}}),t)})))()},add_money:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("blance before charge",e.balance),e.$prompt("Please enter how much you want to charge","message",{confirmButtonText:"confirm",showClose:!1,showCancelButton:!1,closeOnClickModal:!1,closeOnPressEscape:!1,closeOnHashChange:!1}).then((function(t){var r=t.value;e.add_balance=r,console.log("add_balance0",e.add_balance)})),t.next=4,e.contract.methods.charge_game_coins().estimateGas({from:e.account}).catch((function(e){console.err("error charge_game_coins "+e)}));case 4:return r=t.sent,console.log("gasCharge",r),t.next=8,e.contract.methods.charge_game_coins().send({from:e.account,value:l.a.utils.toWei(String(e.add_balance)),gas:r}).catch((function(e){console.err("error charge_game_coins "+e)}));case 8:return console.log("add_balance00",e.add_balance),t.next=11,e.contract.methods.get_balance().call({from:e.account}).catch((function(e){console.err("error get_balance "+e)}));case 11:return a=t.sent,e.balance=a,console.log("blance after charge",e.balance),t.next=16,e.contract.methods.get_game().call({from:e.account}).catch((function(e){console.error("error get_game "+e)}));case 16:n=t.sent,console.log("this game0",n);case 18:case"end":return t.stop()}}),t)})))()},open:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.balance,console.log("max_num",r,e.balance),console.log("bet_num",e.bet_num),t.next=5,e.contract.methods.bet(e.bet_num).estimateGas({from:e.account});case 5:a=t.sent,console.log("gasBet",a),e.$prompt("Please enter your bet（you have ".concat(r," now）"),"message",{confirmButtonText:"confirm",showClose:!1,showCancelButton:!1,closeOnClickModal:!1,closeOnPressEscape:!1,closeOnHashChange:!1,inputValidator:function(e){var t=/(^[\-0-9][0-9]*(.[0-9]+)?)$/;return t.test(e)&&e<=r},inputErrorMessage:"Invalid Number"}).then((function(t){var r=t.value;e.bet_num=r,console.log("betnum1",e.bet_num),e.contract.methods.bet(e.bet_num).send({from:e.account}).catch((function(e){console.err("error bet "+e)}))}));case 8:case"end":return t.stop()}}),t)})))()},stand:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.contract.methods.stand().send({from:e.account}).catch((function(e){console.error("error stand "+e)}));case 2:return t.next=4,e.contract.methods.get_game().call({from:e.account}).catch((function(e){console.error("error get_game "+e)}));case 4:return r=t.sent,console.log("this game after stand",r),t.next=8,e.get_game();case 8:console.log("finishe this game",e.get_game),e.get_result(),e.get_player_score(),e.get_dealer_score();case 12:case"end":return t.stop()}}),t)})))()},hit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.contract.methods.get_game().call({from:e.account}).catch((function(e){console.error("error get_game "+e)}));case 2:return r=t.sent,console.log("this game before hit",r),t.next=6,e.contract.methods.hit().send({from:e.account}).catch((function(e){console.error("error hit "+e)}));case 6:return t.next=8,e.contract.methods.get_game().call({from:e.account}).catch((function(e){console.error("error get_game "+e)}));case 8:r=t.sent,console.log("this game after hit",r);case 10:case"end":return t.stop()}}),t)})))()},get_player_score:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.contract.methods.get_player_score().call({from:e.account}).catch((function(e){console.error("error get_player_score "+e)}));case 2:r=t.sent,e.player_score=r,console.log("get_player_score ",e.player_score);case 5:case"end":return t.stop()}}),t)})))()},get_dealer_score:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.contract.methods.get_dealer_score().call({from:e.account}).catch((function(e){console.error("error get_dealer_score "+e)}));case 2:r=t.sent,e.dealer_score=r,console.log("dealer_score ",e.dealer_score);case 5:case"end":return t.stop()}}),t)})))()}},beforeMount:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("vuecontract",c["default"].prototype.$contract),e.contract=c["default"].prototype.$contract,e.account=c["default"].prototype.$account,e.web3=c["default"].prototype.$web3,console.log("contract",e.contract),t.next=7,e.contract.methods.get_balance().call({from:e.account}).catch((function(e){console.err("error get_balance "+e)}));case 7:r=t.sent,console.log("balance0",r),e.balance=r,console.log("balance00",e.balance),e.get_game(),console.log("this player_arr",e.player_arr);case 13:case"end":return t.stop()}}),t)})))()}},u=i,_=(r("6c7d"),r("2877")),d=Object(_["a"])(u,a,n,!1,null,"737362d5",null);t["default"]=d.exports},"6c7d":function(e,t,r){"use strict";r("f03a")},f03a:function(e,t,r){}}]);
//# sourceMappingURL=chunk-552fb3dc.1652855807918.js.map